
<!DOCTYPE html>

<html lang="zh_CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Perception &#8212; Sphinx documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx13.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/tabs.js"></script>
    <script src="../../_static/translations.js"></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <link rel="canonical" href="https://www.sphinx-doc.org/en/master/modules/perception/Perception_README_3_5.html" />
    <link rel="search" type="application/opensearchdescription+xml"
          title="在 Sphinx documentation 中搜索"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.svg"/>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="next" title="Perception" href="README.html" />
    <link rel="prev" title="Monitor" href="../monitor/README.html" />
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700'
          rel='stylesheet' type='text/css' />
 
    <style type="text/css">
      table.right { float: right; margin-left: 20px; }
      table.right td { border: 1px solid #ccc; }
      
    </style>
    <script>
      // intelligent scrolling of the sidebar content
      $(window).scroll(function() {
        var sb = $('.sphinxsidebarwrapper');
        var win = $(window);
        var sbh = sb.height();
        var offset = $('.sphinxsidebar').position()['top'];
        var wintop = win.scrollTop();
        var winbot = wintop + win.innerHeight();
        var curtop = sb.position()['top'];
        var curbot = curtop + sbh;
        // does sidebar fit in window?
        if (sbh < win.innerHeight()) {
          // yes: easy case -- always keep at the top
          sb.css('top', $u.min([$u.max([0, wintop - offset - 10]),
                                $(document).height() - sbh - 200]));
        } else {
          // no: only scroll if top/bottom edge of sidebar is at
          // top/bottom edge of window
          if (curtop > wintop && curbot > winbot) {
            sb.css('top', $u.max([wintop - offset - 10, 0]));
          } else if (curtop < wintop && curbot < winbot) {
            sb.css('top', $u.min([winbot - sbh - offset - 20,
                                  $(document).height() - sbh - 200]));
          }
        }
      });
    </script>

  </head><body>
<div class="pageheader">
  <ul>
    <li><a href="../../README.html">Home</a></li>
    <li><a href="../../docs/quickstart/README.html">Get it</a></li>
    <li><a href="../../contents.html">Docs</a></li>
    <li><a href="../../development/index.html">Extend</a></li>
  </ul>
  <div>
    <a href="../../README.html">
      <img src="../../_static/sphinx.png" alt="Apollo Doc" />
    </a>
  </div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="总目录"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="README.html" title="Perception"
             accesskey="N">下一页</a> |</li>
        <li class="right" >
          <a href="../monitor/README.html" title="Monitor"
             accesskey="P">上一页</a> |</li>
        <li><a href="../../index.html">Apollo home</a>&#160;|</li>
        <li><a href="../../contents.html">Documentation</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">Perception</a></li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../contents.html">目录</a></h3>
  <ul>
<li><a class="reference internal" href="#">Perception</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#architecture">Architecture</a></li>
<li><a class="reference internal" href="#input">Input</a></li>
<li><a class="reference internal" href="#output">Output</a></li>
<li><a class="reference internal" href="#setup-instructions">Setup Instructions</a><ul>
<li><a class="reference internal" href="#note">Note</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>上一个主题</h4>
  <p class="topless"><a href="../monitor/README.html"
                        title="上一章">Monitor</a></p>
  <h4>下一个主题</h4>
  <p class="topless"><a href="README.html"
                        title="下一章">Perception</a></p>
  <div role="note" aria-label="source link">
    <h3>本页</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/modules/perception/Perception_README_3_5.md.txt"
            rel="nofollow">显示源代码</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">快速搜索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="转向" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section class="tex2jax_ignore mathjax_ignore" id="perception">
<h1>Perception<a class="headerlink" href="#perception" title="永久链接至标题">¶</a></h1>
<p>The Perception module has been upgraded completely to handle comprehensive sensor fusion of our brand-new sensor suite and also keep up with the brand new scenario-based planning.</p>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="永久链接至标题">¶</a></h2>
<p>Apollo Perception has following new features:</p>
<ul class="simple">
<li><p><strong>Support for VLS-128 Line LiDAR</strong></p></li>
<li><p><strong>Obstacle detection through multiple cameras</strong></p></li>
<li><p><strong>Advanced traffic light detection</strong></p></li>
<li><p><strong>Configurable sensor fusion</strong></p></li>
</ul>
<p>The perception module incorporates the capability of using 5 cameras (2 front, 2 on either side and 1 rear) and 2 radars (front and rear) along with 3 16-line LiDARs (2 rear and 1 front) and 1 128-line LiDAR to recognize obstacles and fuse their individual tracks to obtain a final track list. The obstacle sub-module detects, classifies and tracks obstacles. This sub-module also predicts obstacle motion and position information (e.g., heading and velocity). For lane line, we construct lane instances by postprocessing lane parsing pixels and calculate the lane relative location to the ego-vehicle (L0, L1, R0, R1, etc.).</p>
</section>
<section id="architecture">
<h2>Architecture<a class="headerlink" href="#architecture" title="永久链接至标题">¶</a></h2>
<p>The general architecture of the perception module is shown:
<img alt="" src="https://github.com/ApolloAuto/apollo/blob/master/docs/specs/images/Apollo3.5_perception_sensor_based.png" /></p>
<p>The detailed perception modules are displayed below.
<img alt="" src="https://github.com/ApolloAuto/apollo/blob/master/docs/specs/images/Apollo3.5_perception_detail.png" /></p>
</section>
<section id="input">
<h2>Input<a class="headerlink" href="#input" title="永久链接至标题">¶</a></h2>
<p>The perception module inputs are:</p>
<ul class="simple">
<li><p>128 channel LiDAR data (cyber channel /apollo/sensor/velodyne128)</p></li>
<li><p>16 channel LiDAR data (cyber channel /apollo/sensor/lidar_front, lidar_rear_left, lidar_rear_right)</p></li>
<li><p>Radar data (cyber channel /apollo/sensor/radar_front, radar_rear)</p></li>
<li><p>Image data (cyber channel /apollo/sensor/camera/front_6mm, front_12mm)</p></li>
<li><p>Extrinsic parameters of radar sensor calibration (from YAML files)</p></li>
<li><p>Extrinsic and Intrinsic parameters of front camera calibration (from YAML files)</p></li>
<li><p>Velocity and Angular Velocity of host vehicle (cyber channel /apollo/localization/pose)</p></li>
</ul>
</section>
<section id="output">
<h2>Output<a class="headerlink" href="#output" title="永久链接至标题">¶</a></h2>
<p>The perception module outputs are:</p>
<ul class="simple">
<li><p>The 3D obstacle tracks with the heading, velocity and classification information (cyber channel /apollo/perception/obstacles)</p></li>
<li><p>The output of traffic light detection and recognition (cyber channel /apollo/perception/traffic_light)</p></li>
</ul>
</section>
<section id="setup-instructions">
<h2>Setup Instructions<a class="headerlink" href="#setup-instructions" title="永久链接至标题">¶</a></h2>
<ol class="simple">
<li><p>Set up the general settings in the configuration file <code class="docutils literal notranslate"><span class="pre">modules/perception/conf/perception_lowcost.conf</span></code>.</p></li>
<li><p>Run the command  <code class="docutils literal notranslate"><span class="pre">./scripts/bootstrap.sh</span></code> to launch the web GUI.</p></li>
<li><p>Select the vehicle model in the web GUI.</p></li>
<li><p>Launch the perception module using the command <code class="docutils literal notranslate"><span class="pre">./scripts/perception_lowcost_vis.sh</span> <span class="pre">start</span></code> or by enabling the perception button on the <em>Module Controller</em> page of the web GUI. The command for stopping perception is <code class="docutils literal notranslate"><span class="pre">./scripts/perception_lowcost_vis.sh</span> <span class="pre">stop</span></code>. Note: please do not try to use GUI to enable perception but use script to stop it, vice versa.</p></li>
<li><p>Download the demo data from the Apollo <a class="reference external" href="http://data.apollo.auto">Open Data Platform</a>.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Note</span><span class="p">:</span>
    <span class="n">If</span> <span class="n">you</span> <span class="n">are</span> <span class="n">redirected</span> <span class="n">to</span> <span class="n">the</span> <span class="n">Baidu</span> <span class="n">Cloud</span> <span class="n">login</span> <span class="n">page</span><span class="p">,</span> <span class="n">complete</span> <span class="n">the</span> <span class="n">login</span> <span class="ow">and</span> <span class="n">Repeat</span> <span class="n">step</span> <span class="mi">5</span> <span class="p">(</span><span class="n">click</span> <span class="n">on</span> <span class="n">the</span> <span class="n">Open</span> <span class="n">Data</span> <span class="n">Platform</span> <span class="n">link</span><span class="p">)</span>
</pre></div>
</div>
<section id="note">
<h3>Note<a class="headerlink" href="#note" title="永久链接至标题">¶</a></h3>
<ol>
<li><p>Nvidia GPU and CUDA are required to run the perception module with Caffe. Apollo provides the CUDA and Caffe libraries in the release docker image. However, the Nvidia GPU driver is not installed in the dev docker image.</p></li>
<li><p>To run the perception module with CUDA acceleration, install the exact same version of the Nvidia driver in the docker image that is installed on your host machine, and then build Apollo with the GPU option (i.e., using <code class="docutils literal notranslate"><span class="pre">./apollo.sh</span> <span class="pre">build_gpu</span></code> or <code class="docutils literal notranslate"><span class="pre">./apollo.sh</span> <span class="pre">build_opt_gpu</span></code>).</p>
<p>See <a class="reference external" href="https://github.com/ApolloAuto/apollo/blob/master/docs/howto/how_to_run_perception_module_on_your_local_computer.md">How to Run Perception Module on Your Local Computer</a>.</p>
</li>
<li><p>This module contains a redistribution in binary form of a modified version of <a class="reference external" href="https://github.com/BVLC/caffe">caffe</a>.
A copy of the caffe’s original copyright statement is included below:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">COPYRIGHT</span>

<span class="n">All</span> <span class="n">contributions</span> <span class="n">by</span> <span class="n">the</span> <span class="n">University</span> <span class="n">of</span> <span class="n">California</span><span class="p">:</span>
<span class="n">Copyright</span> <span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="mi">2014</span><span class="o">-</span><span class="mi">2017</span> <span class="n">The</span> <span class="n">Regents</span> <span class="n">of</span> <span class="n">the</span> <span class="n">University</span> <span class="n">of</span> <span class="n">California</span> <span class="p">(</span><span class="n">Regents</span><span class="p">)</span>
<span class="n">All</span> <span class="n">rights</span> <span class="n">reserved</span><span class="o">.</span>

<span class="n">All</span> <span class="n">other</span> <span class="n">contributions</span><span class="p">:</span>
<span class="n">Copyright</span> <span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="mi">2014</span><span class="o">-</span><span class="mi">2017</span><span class="p">,</span> <span class="n">the</span> <span class="n">respective</span> <span class="n">contributors</span>
<span class="n">All</span> <span class="n">rights</span> <span class="n">reserved</span><span class="o">.</span>

<span class="n">Caffe</span> <span class="n">uses</span> <span class="n">a</span> <span class="n">shared</span> <span class="n">copyright</span> <span class="n">model</span><span class="p">:</span> <span class="n">each</span> <span class="n">contributor</span> <span class="n">holds</span> <span class="n">copyright</span> <span class="n">over</span> <span class="n">their</span> <span class="n">contributions</span> <span class="n">to</span> <span class="n">Caffe</span><span class="o">.</span> <span class="n">The</span> <span class="n">project</span> <span class="n">versioning</span> <span class="n">records</span> <span class="nb">all</span> <span class="n">such</span> <span class="n">contribution</span> <span class="ow">and</span> <span class="n">copyright</span> <span class="n">details</span><span class="o">.</span> <span class="n">If</span> <span class="n">a</span> <span class="n">contributor</span> <span class="n">wants</span> <span class="n">to</span> <span class="n">further</span> <span class="n">mark</span> <span class="n">their</span> <span class="n">specific</span> <span class="n">copyright</span> <span class="n">on</span> <span class="n">a</span> <span class="n">particular</span> <span class="n">contribution</span><span class="p">,</span> <span class="n">they</span> <span class="n">should</span> <span class="n">indicate</span> <span class="n">their</span> <span class="n">copyright</span> <span class="n">solely</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">commit</span> <span class="n">message</span> <span class="n">of</span> <span class="n">the</span> <span class="n">change</span> <span class="n">when</span> <span class="n">it</span> <span class="ow">is</span> <span class="n">committed</span><span class="o">.</span>

<span class="n">LICENSE</span>

<span class="n">Redistribution</span> <span class="ow">and</span> <span class="n">use</span> <span class="ow">in</span> <span class="n">source</span> <span class="ow">and</span> <span class="n">binary</span> <span class="n">forms</span><span class="p">,</span> <span class="k">with</span> <span class="ow">or</span> <span class="n">without</span> <span class="n">modification</span><span class="p">,</span> <span class="n">are</span> <span class="n">permitted</span> <span class="n">provided</span> <span class="n">that</span> <span class="n">the</span> <span class="n">following</span> <span class="n">conditions</span> <span class="n">are</span> <span class="n">met</span><span class="p">:</span>

    <span class="mf">1.</span> <span class="n">Redistributions</span> <span class="n">of</span> <span class="n">source</span> <span class="n">code</span> <span class="n">must</span> <span class="n">retain</span> <span class="n">the</span> <span class="n">above</span> <span class="n">copyright</span> <span class="n">notice</span><span class="p">,</span> <span class="n">this</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">conditions</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">following</span> <span class="n">disclaimer</span><span class="o">.</span>
    <span class="mf">2.</span> <span class="n">Redistributions</span> <span class="ow">in</span> <span class="n">binary</span> <span class="n">form</span> <span class="n">must</span> <span class="n">reproduce</span> <span class="n">the</span> <span class="n">above</span> <span class="n">copyright</span> <span class="n">notice</span><span class="p">,</span> <span class="n">this</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">conditions</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">following</span> <span class="n">disclaimer</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">documentation</span> <span class="ow">and</span><span class="o">/</span><span class="ow">or</span> <span class="n">other</span> <span class="n">materials</span> <span class="n">provided</span> <span class="k">with</span> <span class="n">the</span> <span class="n">distribution</span><span class="o">.</span>

    <span class="n">THIS</span> <span class="n">SOFTWARE</span> <span class="n">IS</span> <span class="n">PROVIDED</span> <span class="n">BY</span> <span class="n">THE</span> <span class="n">COPYRIGHT</span> <span class="n">HOLDERS</span> <span class="n">AND</span> <span class="n">CONTRIBUTORS</span> <span class="s2">&quot;AS IS&quot;</span> <span class="n">AND</span> <span class="n">ANY</span> <span class="n">EXPRESS</span> <span class="n">OR</span> <span class="n">IMPLIED</span> <span class="n">WARRANTIES</span><span class="p">,</span> <span class="n">INCLUDING</span><span class="p">,</span> <span class="n">BUT</span> <span class="n">NOT</span> <span class="n">LIMITED</span> <span class="n">TO</span><span class="p">,</span> <span class="n">THE</span> <span class="n">IMPLIED</span> <span class="n">WARRANTIES</span> <span class="n">OF</span> <span class="n">MERCHANTABILITY</span> <span class="n">AND</span> <span class="n">FITNESS</span> <span class="n">FOR</span> <span class="n">A</span> <span class="n">PARTICULAR</span> <span class="n">PURPOSE</span> <span class="n">ARE</span>
<span class="n">DISCLAIMED</span><span class="o">.</span> <span class="n">IN</span> <span class="n">NO</span> <span class="n">EVENT</span> <span class="n">SHALL</span> <span class="n">THE</span> <span class="n">COPYRIGHT</span> <span class="n">OWNER</span> <span class="n">OR</span> <span class="n">CONTRIBUTORS</span> <span class="n">BE</span> <span class="n">LIABLE</span> <span class="n">FOR</span> <span class="n">ANY</span> <span class="n">DIRECT</span><span class="p">,</span> <span class="n">INDIRECT</span><span class="p">,</span> <span class="n">INCIDENTAL</span><span class="p">,</span> <span class="n">SPECIAL</span><span class="p">,</span> <span class="n">EXEMPLARY</span><span class="p">,</span> <span class="n">OR</span> <span class="n">CONSEQUENTIAL</span> <span class="n">DAMAGES</span>
<span class="p">(</span><span class="n">INCLUDING</span><span class="p">,</span> <span class="n">BUT</span> <span class="n">NOT</span> <span class="n">LIMITED</span> <span class="n">TO</span><span class="p">,</span> <span class="n">PROCUREMENT</span> <span class="n">OF</span> <span class="n">SUBSTITUTE</span> <span class="n">GOODS</span> <span class="n">OR</span> <span class="n">SERVICES</span><span class="p">;</span> <span class="n">LOSS</span> <span class="n">OF</span> <span class="n">USE</span><span class="p">,</span> <span class="n">DATA</span><span class="p">,</span> <span class="n">OR</span> <span class="n">PROFITS</span><span class="p">;</span> <span class="n">OR</span> <span class="n">BUSINESS</span> <span class="n">INTERRUPTION</span><span class="p">)</span> <span class="n">HOWEVER</span> <span class="n">CAUSED</span> <span class="n">AND</span> <span class="n">ON</span> <span class="n">ANY</span> <span class="n">THEORY</span> <span class="n">OF</span> <span class="n">LIABILITY</span><span class="p">,</span> <span class="n">WHETHER</span> <span class="n">IN</span> <span class="n">CONTRACT</span><span class="p">,</span> <span class="n">STRICT</span> <span class="n">LIABILITY</span><span class="p">,</span> <span class="n">OR</span> <span class="n">TORT</span>
<span class="p">(</span><span class="n">INCLUDING</span> <span class="n">NEGLIGENCE</span> <span class="n">OR</span> <span class="n">OTHERWISE</span><span class="p">)</span> <span class="n">ARISING</span> <span class="n">IN</span> <span class="n">ANY</span> <span class="n">WAY</span> <span class="n">OUT</span> <span class="n">OF</span> <span class="n">THE</span> <span class="n">USE</span> <span class="n">OF</span> <span class="n">THIS</span> <span class="n">SOFTWARE</span><span class="p">,</span> <span class="n">EVEN</span> <span class="n">IF</span> <span class="n">ADVISED</span> <span class="n">OF</span> <span class="n">THE</span> <span class="n">POSSIBILITY</span> <span class="n">OF</span> <span class="n">SUCH</span> <span class="n">DAMAGE</span><span class="o">.</span>

    <span class="n">CONTRIBUTION</span> <span class="n">AGREEMENT</span>

    <span class="n">By</span> <span class="n">contributing</span> <span class="n">to</span> <span class="n">the</span> <span class="n">BVLC</span><span class="o">/</span><span class="n">caffe</span> <span class="n">repository</span> <span class="n">through</span> <span class="n">pull</span><span class="o">-</span><span class="n">request</span><span class="p">,</span> <span class="n">comment</span><span class="p">,</span> <span class="ow">or</span> <span class="n">otherwise</span><span class="p">,</span> <span class="n">the</span> <span class="n">contributor</span> <span class="n">releases</span> <span class="n">their</span> <span class="n">content</span> <span class="n">to</span> <span class="n">the</span> <span class="n">license</span> <span class="ow">and</span> <span class="n">copyright</span> <span class="n">terms</span> <span class="n">herein</span><span class="o">.</span>
</pre></div>
</div>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="总目录"
             >索引</a></li>
        <li class="right" >
          <a href="README.html" title="Perception"
             >下一页</a> |</li>
        <li class="right" >
          <a href="../monitor/README.html" title="Monitor"
             >上一页</a> |</li>
        <li><a href="../../index.html">Apollo home</a>&#160;|</li>
        <li><a href="../../contents.html">Documentation</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">Perception</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; 版权所有 2021, xinetzone.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.2.0.
    </div>
  </body>
</html>