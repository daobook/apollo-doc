
<!DOCTYPE html>

<html lang="zh_CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>循迹搭建–车辆集成 &#8212; Sphinx documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx13.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/tabs.js"></script>
    <script src="../../../_static/translations.js"></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <link rel="canonical" href="https://www.sphinx-doc.org/en/master/docs/D-kit/Waypoint_Following/vehicle_integration_cn.html" />
    <link rel="search" type="application/opensearchdescription+xml"
          title="在 Sphinx documentation 中搜索"
          href="../../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../../_static/favicon.svg"/>
    <link rel="index" title="索引" href="../../../genindex.html" />
    <link rel="search" title="搜索" href="../../../search.html" />
    <link rel="next" title="概览" href="../readme.html" />
    <link rel="prev" title="循迹搭建–车辆动力学云标定" href="vehicle_calibration_online_cn.html" />
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700'
          rel='stylesheet' type='text/css' />
 
    <style type="text/css">
      table.right { float: right; margin-left: 20px; }
      table.right td { border: 1px solid #ccc; }
      
    </style>
    <script>
      // intelligent scrolling of the sidebar content
      $(window).scroll(function() {
        var sb = $('.sphinxsidebarwrapper');
        var win = $(window);
        var sbh = sb.height();
        var offset = $('.sphinxsidebar').position()['top'];
        var wintop = win.scrollTop();
        var winbot = wintop + win.innerHeight();
        var curtop = sb.position()['top'];
        var curbot = curtop + sbh;
        // does sidebar fit in window?
        if (sbh < win.innerHeight()) {
          // yes: easy case -- always keep at the top
          sb.css('top', $u.min([$u.max([0, wintop - offset - 10]),
                                $(document).height() - sbh - 200]));
        } else {
          // no: only scroll if top/bottom edge of sidebar is at
          // top/bottom edge of window
          if (curtop > wintop && curbot > winbot) {
            sb.css('top', $u.max([wintop - offset - 10, 0]));
          } else if (curtop < wintop && curbot < winbot) {
            sb.css('top', $u.min([winbot - sbh - offset - 20,
                                  $(document).height() - sbh - 200]));
          }
        }
      });
    </script>

  </head><body>
<div class="pageheader">
  <ul>
    <li><a href="../../../README.html">Home</a></li>
    <li><a href="../../quickstart/README.html">Get it</a></li>
    <li><a href="../../../contents.html">Docs</a></li>
    <li><a href="../../../development/index.html">Extend</a></li>
  </ul>
  <div>
    <a href="../../../README.html">
      <img src="../../../_static/sphinx.png" alt="Apollo Doc" />
    </a>
  </div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="总目录"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="../readme.html" title="概览"
             accesskey="N">下一页</a> |</li>
        <li class="right" >
          <a href="vehicle_calibration_online_cn.html" title="循迹搭建–车辆动力学云标定"
             accesskey="P">上一页</a> |</li>
        <li><a href="../../../index.html">Apollo home</a>&#160;|</li>
        <li><a href="../../../contents.html">Documentation</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">循迹搭建–车辆集成</a></li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../../contents.html">目录</a></h3>
  <ul>
<li><a class="reference internal" href="#">循迹搭建–车辆集成</a><ul>
<li><a class="reference internal" href="#id2">概览</a></li>
<li><a class="reference internal" href="#id3">前提条件</a></li>
<li><a class="reference internal" href="#id4">工控机安装</a></li>
<li><a class="reference internal" href="#id5">导航设备安装</a><ul>
<li><a class="reference internal" href="#id6">安装主机和天线</a><ul>
<li><a class="reference internal" href="#id7">安装需要的组件</a></li>
<li><a class="reference internal" href="#id8">挂载</a></li>
<li><a class="reference internal" href="#id9">配线</a></li>
<li><a class="reference internal" href="#id10">量取杆臂值</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#next">NEXT</a></li>
</ul>
</li>
</ul>

  <h4>上一个主题</h4>
  <p class="topless"><a href="vehicle_calibration_online_cn.html"
                        title="上一章">循迹搭建–车辆动力学云标定</a></p>
  <h4>下一个主题</h4>
  <p class="topless"><a href="../readme.html"
                        title="下一章">概览</a></p>
  <div role="note" aria-label="source link">
    <h3>本页</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/docs/D-kit/Waypoint_Following/vehicle_integration_cn.md.txt"
            rel="nofollow">显示源代码</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">快速搜索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="转向" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section class="tex2jax_ignore mathjax_ignore" id="id1">
<h1>循迹搭建–车辆集成<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h1>
<ul class="simple">
<li><p><a class="reference external" href="#%E5%BE%AA%E8%BF%B9%E6%90%AD%E5%BB%BA--%E8%BD%A6%E8%BE%86%E9%9B%86%E6%88%90">循迹搭建–车辆集成</a></p>
<ul>
<li><p><a class="reference external" href="#%E6%A6%82%E8%A7%88">概览</a></p></li>
<li><p><a class="reference external" href="#%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6">前提条件</a></p></li>
<li><p><a class="reference external" href="#%E5%B7%A5%E6%8E%A7%E6%9C%BA%E5%AE%89%E8%A3%85">工控机安装</a></p></li>
<li><p><a class="reference external" href="#%E5%AF%BC%E8%88%AA%E8%AE%BE%E5%A4%87%E5%AE%89%E8%A3%85">导航设备安装</a></p>
<ul>
<li><p><a class="reference external" href="#%E5%AE%89%E8%A3%85%E4%B8%BB%E6%9C%BA%E5%92%8C%E5%A4%A9%E7%BA%BF">安装主机和天线</a></p>
<ul>
<li><p><a class="reference external" href="#%E5%AE%89%E8%A3%85%E9%9C%80%E8%A6%81%E7%9A%84%E7%BB%84%E4%BB%B6">安装需要的组件</a></p></li>
<li><p><a class="reference external" href="#%E6%8C%82%E8%BD%BD">挂载</a></p></li>
<li><p><a class="reference external" href="#%E9%85%8D%E7%BA%BF">配线</a></p></li>
<li><p><a class="reference external" href="#%E9%87%8F%E5%8F%96%E6%9D%86%E8%87%82%E5%80%BC">量取杆臂值</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference external" href="#next">NEXT</a></p></li>
</ul>
</li>
</ul>
<section id="id2">
<h2>概览<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h2>
<p>该手册旨在帮助用户在自动驾驶开发套件上安装和配置IPC和GPS导航等相关设备。设备集成后的硬件连接图如下所示：</p>
<p><img alt="waypoint_following.png" src="../../../_images/waypoint_following.png" /></p>
</section>
<section id="id3">
<h2>前提条件<a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h2>
<ul class="simple">
<li><p>完成了<a class="reference internal" href="apollo_installation_cn.html"><span class="doc std std-doc">循迹搭建–Apollo系统安装</span></a></p></li>
</ul>
</section>
<section id="id4">
<h2>工控机安装<a class="headerlink" href="#id4" title="永久链接至标题">¶</a></h2>
<p>工控机的安装包括工控机主机的安装、显示器的安装、CAN线的安装、路由器的安装和无线键盘的安装，分别介绍如下：</p>
<ul class="simple">
<li><p>先将工控机的两个安装底座套上八个黑色的圆形橡胶垫片，然后用银色的螺丝钉将两个底座和工控机安装在一起；再将工控机主机安装在小车的底板的中心位置的四个固定的安装小孔上，使用银色的螺丝钉固定使其与小车的底板固连，将工控机的主板接口朝向小车的尾部以便于我们连接显示器等其它设备。工控机的电源接口接小车上的24V的直流电源。</p></li>
<li><p>将显示器安装在小车的车架预留的安装位置并用卡扣将显示器固定好。用HDMI数据线将显示器和工控机的显卡连接起来。显示器的电源线接小车上的12V的直流电源。</p></li>
<li><p>将CAN线的一端接在工控机的CAN卡的上面一个接口上，为防脱落，请拧紧螺丝固定好CAN线，将CAN线的另一端和小车的车身CAN线连接在一起。</p></li>
<li><p>将路由器安装固定在小车的底板上，可用强力双面胶粘住以防脱落。路由器的电源接口接小车上的12V的直流电源。路由器的sim卡插口插入我们平时使用的手机sim卡即可。注意sim卡插入时可能需要卡托，请选用尺寸大小合适的卡托将sim卡插入插口并注意正反面不要插反。用网线将路由器的LAN口和工控机的网口连接起来，以使路由器可以给工控机提供网路服务。</p></li>
<li><p>将无线键盘的信号接收器插入工控机的USB接口上，装入电池并打开无线键盘的开关。</p></li>
</ul>
</section>
<section id="id5">
<h2>导航设备安装<a class="headerlink" href="#id5" title="永久链接至标题">¶</a></h2>
<p>星网宇达Newton-M2是一款支持静态双天线初始化的GPS导航设备，其在Apollo系统中的安装配置主要包括硬件设置和软件配置两个部分，下面介绍硬件设置部分：</p>
<section id="id6">
<h3>安装主机和天线<a class="headerlink" href="#id6" title="永久链接至标题">¶</a></h3>
<p>本安装指南描述了挂载、连接和为主机与天线量取和设置杆臂值尺寸的步骤：</p>
<section id="id7">
<h4>安装需要的组件<a class="headerlink" href="#id7" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li><p>Newton-M2主机（1个）</p></li>
</ul>
<p><img alt="M2_host" src="../../../_images/gps_host.png" /></p>
<ul class="simple">
<li><p>卫星天线（2个）：测量型卫星天线，信号接口为TNC母口</p></li>
</ul>
<p><img alt="M2_antenna" src="../../../_images/gps_antenna.png" /></p>
<ul class="simple">
<li><p>射频连接线（2根）：射频线两端分别为TNC公头和SMA母头</p></li>
</ul>
<p><img alt="M2_cable" src="../../../_images/gps_cable.png" /></p>
<ul class="simple">
<li><p>数据/电源线缆（1根）：一端是和主机相连的接口，另一端含有一个串口母头，一根RJ-45网线母头，一根电源接口和一个USB接口</p></li>
</ul>
</section>
<section id="id8">
<h4>挂载<a class="headerlink" href="#id8" title="永久链接至标题">¶</a></h4>
<p>使用者可以将主机安装在载体上的任何位置，但我们强烈建议使用者采用下述的建议方案：</p>
<ul class="simple">
<li><p>将M2主机安装在小车的后轴的中心位置上，使主机铭牌上标示的坐标系XOY面尽量与载体坐标系平行并保持各轴向一致，将Y轴的正向保持与载体的前进方向一致，M2主机单元必须与被测载体固连，可用强力双面胶进行粘贴。</p></li>
<li><p>GNSS双天线应尽量与载体坐标系Y轴平行并且前天线（Secondary）应在Y轴正方向上，GNSS天线要尽可能的将其安置于测试载体的最高处以保证能够接收到良好的GNSS信号。将天线分别安装在小车的车架头尾预留的小圆片上。</p></li>
</ul>
</section>
<section id="id9">
<h4>配线<a class="headerlink" href="#id9" title="永久链接至标题">¶</a></h4>
<p>执行如下步骤将主机和天线连接到Apollo系统：</p>
<ul class="simple">
<li><p>将两根射频线的TNC公头连接上卫星天线的TNC母口。
<img alt="IMU_ANTE" src="../../../_images/imu_ante.png" /></p></li>
<li><p>将射频线的SMA母口连接上IMU主机的SMA公口，车尾天线为主天线，将其连接在IMU的Primary接口上。
<img alt="IMU_TNC" src="../../../_images/imu_tnc.png" /></p></li>
<li><p>将数据/电源线缆的公口和IMU主机的母口连接。
<img alt="IMU_POWER_DATA" src="../../../_images/imu_power_data.jpg" /></p></li>
<li><p>将数据/电源线缆的串口母头连接上工控机的串口公口COM1，此线若过短，请使用串口延长线。注意：此线在完全配置完IMU之后就不需要再连接在IPC上了。
<img alt="IMU_COM" src="../../../_images/imu_com.jpg" /></p></li>
<li><p>将数据/电源线缆的网线母头和路由器LAN口接出来的有线网的水晶头相连接。
<img alt="IMU_ETHERNET" src="../../../_images/imu_ethernet.jpg" /></p></li>
<li><p>将数据/电源线缆的USB接口连接上IPC的USB接口。
<img alt="IMU_USB" src="../../../_images/imu_usb.png" /></p></li>
<li><p>将数据/电源线缆的电源线接口和小车的12V电源接口连接起来。</p></li>
</ul>
</section>
<section id="id10">
<h4>量取杆臂值<a class="headerlink" href="#id10" title="永久链接至标题">¶</a></h4>
<p>在后面配置IMU的参数时，我们会用到主天线的杆臂值，这里我们先量取并记录下它留作后用。杆臂值的量取参考下述步骤：</p>
<ul>
<li><p>当主机和天线处在正确位置时量取天线到主机的距离。主机的中点和天线的中点标记在设备的外部。</p></li>
<li><p>距离被测量并记录为X轴偏移x_offset、Y轴偏移y_offset和Z轴偏移z_offset。坐标轴由主机的位置确定。偏移量的误差应该被控制在一厘米以内以获取高精度的定位信息。杆臂是指后天线（Primary）的几何中心位置相对于主机几何中心在直角坐标系内x,y,z三方向的位置差。x_offset:X方向的杆臂误差，单位为米，以此类推。注：上述坐标XYZ为设备坐标轴配置后的实际坐标，一般应与载体坐标系一致，注意补偿的是后天线（Primary）杆臂值。当进行导航模式配置后必须对设备进行重新上电启动。举例如下：</p>
<p><img alt="图片" src="../../../_images/gps_vehicle_map1.png" />
<img alt="图片" src="../../../_images/gps_vehicle_map2.png" /></p>
</li>
</ul>
<p>如上图所示：开发套件M2主机放置与车辆后轴中间附近（关于车辆坐标系说明请参考<a class="reference internal" href="../../specs/coordination_cn.html"><span class="doc std std-doc">Apollo车辆坐标系说明</span></a>），M2的Y轴正向与车辆前进方向一致，前后天线分别安装至车辆前后中间位置，后天线与M2主机在X轴的原点位置重合，则X轴偏移x_offset的值为0；后天线在M2主机Y轴的负向0.1m处，则Y轴偏移y_offset的值为-0.1；后天线在M2主机Z轴的正向0.6m处，则Z轴偏移z_offset的值为0.6，则杆臂值为(0,-0.1,0.6)。</p>
</section>
</section>
</section>
<section id="next">
<h2>NEXT<a class="headerlink" href="#next" title="永久链接至标题">¶</a></h2>
<p>现在，您已经完成车辆集成，接下来可以开始<a class="reference internal" href="localization_configuration_cn.html"><span class="doc std std-doc">循迹搭建–定位模块配置</span></a></p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="总目录"
             >索引</a></li>
        <li class="right" >
          <a href="../readme.html" title="概览"
             >下一页</a> |</li>
        <li class="right" >
          <a href="vehicle_calibration_online_cn.html" title="循迹搭建–车辆动力学云标定"
             >上一页</a> |</li>
        <li><a href="../../../index.html">Apollo home</a>&#160;|</li>
        <li><a href="../../../contents.html">Documentation</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">循迹搭建–车辆集成</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; 版权所有 2021, xinetzone.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.2.0.
    </div>
  </body>
</html>