
<!DOCTYPE html>

<html lang="zh_CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Linters and Formatters used in Apollo 6.0 &#8212; Sphinx documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx13.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/tabs.js"></script>
    <script src="../../_static/translations.js"></script>
    <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <link rel="canonical" href="https://www.sphinx-doc.org/en/master/docs/specs/linters_and_formatters.html" />
    <link rel="search" type="application/opensearchdescription+xml"
          title="在 Sphinx documentation 中搜索"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.svg"/>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="next" title="Perception" href="perception_apollo_2.5.html" />
    <link rel="prev" title="Dynamic Model - Control-in-loop Simulation" href="dynamic_model.html" />
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700'
          rel='stylesheet' type='text/css' />
 
    <style type="text/css">
      table.right { float: right; margin-left: 20px; }
      table.right td { border: 1px solid #ccc; }
      
    </style>
    <script>
      // intelligent scrolling of the sidebar content
      $(window).scroll(function() {
        var sb = $('.sphinxsidebarwrapper');
        var win = $(window);
        var sbh = sb.height();
        var offset = $('.sphinxsidebar').position()['top'];
        var wintop = win.scrollTop();
        var winbot = wintop + win.innerHeight();
        var curtop = sb.position()['top'];
        var curbot = curtop + sbh;
        // does sidebar fit in window?
        if (sbh < win.innerHeight()) {
          // yes: easy case -- always keep at the top
          sb.css('top', $u.min([$u.max([0, wintop - offset - 10]),
                                $(document).height() - sbh - 200]));
        } else {
          // no: only scroll if top/bottom edge of sidebar is at
          // top/bottom edge of window
          if (curtop > wintop && curbot > winbot) {
            sb.css('top', $u.max([wintop - offset - 10, 0]));
          } else if (curtop < wintop && curbot < winbot) {
            sb.css('top', $u.min([winbot - sbh - offset - 20,
                                  $(document).height() - sbh - 200]));
          }
        }
      });
    </script>

  </head><body>
<div class="pageheader">
  <ul>
    <li><a href="../../README.html">Home</a></li>
    <li><a href="../quickstart/README.html">Get it</a></li>
    <li><a href="../../contents.html">Docs</a></li>
    <li><a href="../../development/index.html">Extend</a></li>
  </ul>
  <div>
    <a href="../../README.html">
      <img src="../../_static/sphinx.png" alt="Apollo Doc" />
    </a>
  </div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="总目录"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="perception_apollo_2.5.html" title="Perception"
             accesskey="N">下一页</a> |</li>
        <li class="right" >
          <a href="dynamic_model.html" title="Dynamic Model - Control-in-loop Simulation"
             accesskey="P">上一页</a> |</li>
        <li><a href="../../index.html">Apollo home</a>&#160;|</li>
        <li><a href="../../contents.html">Documentation</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">Linters and Formatters used in Apollo 6.0</a></li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../contents.html">目录</a></h3>
  <ul>
<li><a class="reference internal" href="#">Linters and Formatters used in Apollo 6.0</a><ul>
<li><a class="reference internal" href="#apollo-coding-style">Apollo Coding Style</a></li>
<li><a class="reference internal" href="#linters-in-apollo">Linters in Apollo</a></li>
<li><a class="reference internal" href="#formatters-in-apollo">Formatters in Apollo</a></li>
<li><a class="reference internal" href="#conclusion">Conclusion</a></li>
</ul>
</li>
</ul>

  <h4>上一个主题</h4>
  <p class="topless"><a href="dynamic_model.html"
                        title="上一章">Dynamic Model - Control-in-loop Simulation</a></p>
  <h4>下一个主题</h4>
  <p class="topless"><a href="perception_apollo_2.5.html"
                        title="下一章">Perception</a></p>
  <div role="note" aria-label="source link">
    <h3>本页</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/docs/specs/linters_and_formatters.md.txt"
            rel="nofollow">显示源代码</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">快速搜索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="转向" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section class="tex2jax_ignore mathjax_ignore" id="linters-and-formatters-used-in-apollo-6-0">
<h1>Linters and Formatters used in Apollo 6.0<a class="headerlink" href="#linters-and-formatters-used-in-apollo-6-0" title="永久链接至标题">¶</a></h1>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Programs</span> <span class="n">should</span> <span class="n">be</span> <span class="n">written</span> <span class="k">for</span> <span class="n">people</span> <span class="n">to</span> <span class="n">read</span><span class="p">,</span> <span class="ow">and</span>
<span class="n">only</span> <span class="n">incidentally</span> <span class="k">for</span> <span class="n">machines</span> <span class="n">to</span> <span class="n">execute</span><span class="o">.</span>

                         <span class="o">--</span> <span class="n">Harold</span> <span class="n">Abelson</span>
</pre></div>
</div>
<p>A great project is made out of consistent code. In the ideal world, you should
not be able to tell who wrote a certain line of the code for the project. Modern
linters and formatters help to close this gap by specifying a simple set of
rules to be enforced on all developers working on the project. Such tools also
stimulate developers to write better code by pointing out common mistakes and
introducing good programming practices.</p>
<p>Generally, linters are used for catching errors, whereas formatters are used to
fix coding style problems.</p>
<p>In this article, we will describe briefly the various linters and formatters
used in Apollo.</p>
<section id="apollo-coding-style">
<h2>Apollo Coding Style<a class="headerlink" href="#apollo-coding-style" title="永久链接至标题">¶</a></h2>
<p>As you may already know, Apollo adopted Google coding style for C/C++ and Python
programs. You can refer to
<a class="reference external" href="https://google.github.io/styleguide/cppguide.html">Google C++ Style Guide</a> and
<a class="reference external" href="https://google.github.io/styleguide/pyguide.html">Google Python Style Guide</a>
for full text of their specifications.</p>
</section>
<section id="linters-in-apollo">
<h2>Linters in Apollo<a class="headerlink" href="#linters-in-apollo" title="永久链接至标题">¶</a></h2>
<p>To enforce that everyone conform to Apollo coding style, the following linters
are provided for developers to check style issues.</p>
<p><strong>Note:</strong></p>
<blockquote>
<div><p>As the time of this writing, Apollo CI system enforced style check on C++
files only. We hope that linters for other languages will be online in the
near future.</p>
</div></blockquote>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="text-align:center head"><p>Linters</p></th>
<th class="text-align:center head"><p>Source Extensions</p></th>
<th class="text-align:left head"><p>Usage</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:center"><p>cpplint</p></td>
<td class="text-align:center"><p>.h/.c/.hpp/.cpp/.hh/.cc/.hxx/.cxx/.cu</p></td>
<td class="text-align:left"><p>bash <a class="reference external" href="http://apollo.sh">apollo.sh</a> lint –cpp</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>flake8</p></td>
<td class="text-align:center"><p>.py</p></td>
<td class="text-align:left"><p>bash <a class="reference external" href="http://apollo.sh">apollo.sh</a> lint –py</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>shellcheck</p></td>
<td class="text-align:center"><p>.sh/.bash/.bashrc</p></td>
<td class="text-align:left"><p>bash <a class="reference external" href="http://apollo.sh">apollo.sh</a> lint –sh</p></td>
</tr>
</tbody>
</table>
<p>To make sure your code conforms to Apollo coding style, you can use
<code class="docutils literal notranslate"><span class="pre">./apollo.sh</span> <span class="pre">lint</span></code> to find any possible style problems and fix them manually.</p>
</section>
<section id="formatters-in-apollo">
<h2>Formatters in Apollo<a class="headerlink" href="#formatters-in-apollo" title="永久链接至标题">¶</a></h2>
<p>To help ease your life with Apollo coding style, various formatters are
pre-installed into Apollo Docker image, to help you auto-format your code, and
avoid common mistakes when writing code.</p>
<p>The following table lists the formatters currently integrated into Apollo,
covering C/C++, Python, Bash, Bazel, Markdown, JSON and YAML files.</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="text-align:center head"><p>Formatters</p></th>
<th class="text-align:center head"><p>Source Extensions</p></th>
<th class="text-align:center head"><p>Usage</p></th>
<th class="text-align:center head"><p>Formatter Config</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:center"><p>clang-format</p></td>
<td class="text-align:center"><p>.h/.c/.hpp/.cpp/.hh/.cc/.hxx/.cxx/.cu/.proto</p></td>
<td class="text-align:center"><p>./apollo.sh format -c &lt;path/to/src/dir/or/files&gt;</p></td>
<td class="text-align:center"><p>.clang-format</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>autopep8</p></td>
<td class="text-align:center"><p>.py</p></td>
<td class="text-align:center"><p>./apollo.sh format -p &lt;path/to/src/dir/or/files&gt;</p></td>
<td class="text-align:center"><p>tox.ini</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>buildifier</p></td>
<td class="text-align:center"><p>.BUILD/.bzl/.bazel/WORKSPACE/BUILD</p></td>
<td class="text-align:center"><p>./apollo.sh format -b &lt;path/to/src/dir/or/files&gt;</p></td>
<td class="text-align:center"><p>N/A</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>shfmt</p></td>
<td class="text-align:center"><p>.sh/.bash/.bashrc</p></td>
<td class="text-align:center"><p>./apollo.sh format -s &lt;path/to/src/dir/or/files&gt;</p></td>
<td class="text-align:center"><p>.editorconfig</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>prettier</p></td>
<td class="text-align:center"><p>.md/.json/.yml</p></td>
<td class="text-align:center"><p>./apollo.sh format -m &lt;path/to/src/dir/or/files&gt;</p></td>
<td class="text-align:center"><p>.prettier.json</p></td>
</tr>
</tbody>
</table>
<p>For easy use, you can format all files with types listed above with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">apollo</span><span class="o">.</span><span class="n">sh</span> <span class="nb">format</span> <span class="o">&lt;</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="nb">dir</span><span class="o">/</span><span class="ow">or</span><span class="o">/</span><span class="n">files</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>For example,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">apollo</span><span class="o">.</span><span class="n">sh</span> <span class="nb">format</span> <span class="n">WORKSPACE</span> <span class="n">third_party</span><span class="o">/</span><span class="n">BUILD</span> <span class="o">./</span><span class="n">scripts</span><span class="o">/</span>
</pre></div>
</div>
<p>which will auto-format Bazel <code class="docutils literal notranslate"><span class="pre">WORKSPACE</span></code> file under <code class="docutils literal notranslate"><span class="pre">$APOLLO_ROOT_DIR</span></code>,
<code class="docutils literal notranslate"><span class="pre">third_party/BUILD</span></code> file, and all the files under the <code class="docutils literal notranslate"><span class="pre">./scripts</span></code> directory.</p>
<p>Note:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">./apollo.sh</span> <span class="pre">format</span></code> can also work outside Docker if relavant tools installed
properly.</p>
</div></blockquote>
</section>
<section id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="永久链接至标题">¶</a></h2>
<p>To summarize,</p>
<ul class="simple">
<li><p>Use <code class="docutils literal notranslate"><span class="pre">./apollo.sh</span> <span class="pre">lint</span></code> to check coding style errors.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">./apollo.sh</span> <span class="pre">format</span></code> to auto-format your code.</p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="总目录"
             >索引</a></li>
        <li class="right" >
          <a href="perception_apollo_2.5.html" title="Perception"
             >下一页</a> |</li>
        <li class="right" >
          <a href="dynamic_model.html" title="Dynamic Model - Control-in-loop Simulation"
             >上一页</a> |</li>
        <li><a href="../../index.html">Apollo home</a>&#160;|</li>
        <li><a href="../../contents.html">Documentation</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">Linters and Formatters used in Apollo 6.0</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; 版权所有 2021, xinetzone.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.2.0.
    </div>
  </body>
</html>